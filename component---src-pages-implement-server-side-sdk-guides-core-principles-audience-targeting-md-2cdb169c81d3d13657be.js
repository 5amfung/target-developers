(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[5191],{15478:function(e,t,n){"use strict";n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return p}});var a,r=n(22122),i=n(19756),d=(n(15007),n(64983)),o=n(99536),s=["components"],m={},l=(a="CodeBlock",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)}),c={_frontmatter:m},u=o.Z;function p(e){var t=e.components,n=(0,i.Z)(e,s);return(0,d.mdx)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"audience-targeting"},"Audience targeting"),(0,d.mdx)("h2",{id:"overview"},"Overview"),(0,d.mdx)("p",null,"Audiences can be used to target your experimentation and personalization activities. Adobe Target supports myriad powerful audience targeting capabilities out of the box. The following attributes are available for ",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/create-audience.html"},"audience targeting"),":"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Rule"),(0,d.mdx)("th",{parentName:"tr",align:null},"Attributes"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/target-library.html"},"Target Library")),(0,d.mdx)("td",{parentName:"tr",align:null})))),(0,d.mdx)("p",null,"Referred from Bing\nChrome Browser\nFirefox Browser\nReferred from Google\nInternet Explorer\nLinux Operating System\nMac OS Operating System\nNew Visitors\nReturning Visitors\nSafari Browser\nTablet Device\nWindows Operating System\nReferred from Yahoo|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/geo.html"},"Geo"),"|\nCountry/Region\nState\nCity\nZip Code\nLatitude\nLongitude\nDMA\nMobile Carrier|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/network.html"},"Network"),"|",(0,d.mdx)("em",{parentName:"p"}," ISP\nDomain Name\nConnection Speed|\n|",(0,d.mdx)("a",{parentName:"em",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/mobile.html"},"Mobile"),"|Device Marketing Name\nDevice Model\nDevice Vendor\nIs Mobile Device\nIs Mobile Phone\nIs Tablet\nOS\nScreen Height (px)\nScreen Width (px)|\n|",(0,d.mdx)("a",{parentName:"em",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/custom-parameters.html"},"Custom parameters"),"|"),"any key / value pair",(0,d.mdx)("em",{parentName:"p"},"|\n|",(0,d.mdx)("a",{parentName:"em",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/operating-system.html"},"Operating System"),"|")," Linux\nMacintosh\nWindows|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/site-pages.html"},"Site pages"),"|",(0,d.mdx)("em",{parentName:"p"}," Current Page\nPrevious Page\nLanding Page\nHTTP Header|\n|",(0,d.mdx)("a",{parentName:"em",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/browser.html"},"Browser"),"|")," Type\nLanguage\nVersion|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/visitor-profile.html"},"Visitor Profile"),"|",(0,d.mdx)("em",{parentName:"p"},"any key / value pair, which is persisted"),"|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/traffic-sources.html"},"Traffic Sources"),"|* From Baidu\nFrom Bing\nFrom Google\nFrom Yahoo\nReferring Landing Page: URL\nReferring Landing Page: Domain\nReferring Landing Page: Query|\n|",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/time-frame.html"},"Time Frame"),"|Start Date / End Date|"),(0,d.mdx)("h2",{id:"client-hints"},"Client Hints"),(0,d.mdx)("p",null,"Adobe Target requires Client Hints for correct segmentation of Browser, Operating System, and Mobile audience attributes, as well as certain instances of Profile Scripts. For more information, see ",(0,d.mdx)("a",{parentName:"p",href:"../core-principles/audience-targeting.md"},"User Agent and Client Hints"),"."),(0,d.mdx)("h3",{id:"how-to-pass-client-hints-to-adobe-target"},"How to Pass Client Hints to Adobe Target"),(0,d.mdx)("p",null,"Starting with Node.js SDK v2.4.0 and Java SDK v2.3.0, Client Hints can be sent to Target via ",(0,d.mdx)("inlineCode",{parentName:"p"},"getOffers()")," calls. Client Hints should be included on the ",(0,d.mdx)("inlineCode",{parentName:"p"},"request.context")," object, along with User Agent."),(0,d.mdx)(l,{slots:"heading, code",repeat:"2",languages:"js, JAVA",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"nodejs-sdk"},"Node.js SDK"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-js"},'targetClient.getOffers({ \n\n    request: { \n\n        context: { \n\n            channel: "mobile" \n\n            userAgent: "Mozilla/5.0 (Linux; Android 12; Pixel 4a) AppleWebKit/537.36 (KHTML, like Gecko) Mobile Safari/537.36", \n\n            clientHints: { \n\n                mobile: "true", \n\n                platform: "Linux", \n\n                platformVersion: "12.1", \n\n                model: "Pixel 4a", \n\n                browserUAWithMajorVersion: "\\"Not A;Brand\\";v=\\"98\\", \\"Chromium\\";v=\\"98\\", \\"Google Chrome\\";v=\\"98\\"", \n\n                browserUAWithFullVersion: "\\" Not A;Brand\\";v=\\"98.0.0.0\\", \\"Chromium\\";v=\\"98.0.4844.83\\", \\"Google Chrome\\";v=\\"98.0.4758.101\\"", \n\n                bitness: "64", \n\n                architecture: "x86" \n\n            } \n\n        }, \n\n        execute: { \n\n            mboxes: [{ \n\n                name: "home", \n\n                index: 1 \n\n            }] \n\n        } \n\n    } \n\n});\n')),(0,d.mdx)("h4",{id:"java-sdk"},"Java SDK"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},'import com.adobe.target.delivery.v1.model.ClientHints; \n\nimport com.adobe.target.delivery.v1.model.Context; \n\nimport com.adobe.target.delivery.v1.model.ExecuteRequest; \n\nimport com.adobe.target.edge.client.model.TargetDeliveryRequest; \n\n  \n\nClientHints clientHints = new ClientHints(); \n\nclientHints.setMobile(true); \n\nclientHints.setPlatform("macOS"); \n\nclientHints.setArchitecture("x86"); \n\nclientHints.setPlatformVersion("11.3.1"); \n\nclientHints.setBrowserUAWithMajorVersion( \n\n  "\\" Not A;Brand\\";v=\\"99\\", \\"Chromium\\";v=\\"99\\", \\"Google Chrome\\";v=\\"99\\""); \n\nString userAgent = \n\n  "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36"; \n\n   \n\nTargetDeliveryRequest request = TargetDeliveryRequest.builder() \n\n        .execute(new ExecuteRequest().pageLoad(pageLoad)) \n\n        .context(new Context().clientHints(clientHints).userAgent(userAgent)) \n\n        .build(); \n')),(0,d.mdx)("h2",{id:"on-device-decisioning"},"On-device decisioning"),(0,d.mdx)("p",null,"The following table indicates which audience rules are supported or not supported for on-device decisioning."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Audience Rule"),(0,d.mdx)("th",{parentName:"tr",align:null},"On-device Decisioning"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/geo.html"},"Geo")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/network.html"},"Network")),(0,d.mdx)("td",{parentName:"tr",align:null},"No")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/mobile.html"},"Mobile")),(0,d.mdx)("td",{parentName:"tr",align:null},"No")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/custom-parameters.html"},"Custom Parameters")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/operating-system.html"},"Operating System")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/site-pages.html"},"Site Pages")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/browser.html"},"Browser")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/visitor-profile.html"},"Visitor Profile")),(0,d.mdx)("td",{parentName:"tr",align:null},"No")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/traffic-sources.html"},"Traffic Sources")),(0,d.mdx)("td",{parentName:"tr",align:null},"No")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/time-frame.html"},"Time Frame")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/integrate/mmp.html"},"Experience Cloud Audiences")," (Audiences from Adobe Audience Manager, Adobe Analytics, and Adobe Experience Manager"),(0,d.mdx)("td",{parentName:"tr",align:null},"No")))),(0,d.mdx)("h3",{id:"geo-targeting-for-on-device-decisioning"},"Geo targeting for on-device decisioning"),(0,d.mdx)("p",null,"In order to maintain near-zero latency for on-device decisioning activities with geo-based audiences, Adobe recommends you provide the geo values yourself in the call to ",(0,d.mdx)("inlineCode",{parentName:"p"},"getOffers"),". Do this by setting the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Geo")," object in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Context")," of the request. This means your server will need a way to determine the location of each end user. For example, your server may perform an IP-to-Geo lookup, using a service you configure. Some hosting providers, such as Google Cloud, provide this functionality via custom headers in each ",(0,d.mdx)("inlineCode",{parentName:"p"},"HttpServletRequest"),"."),(0,d.mdx)(l,{slots:"heading, code",repeat:"2",languages:"js, java",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"nodejs"},"Node.js"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-js"},'const CONFIG = {\n    client: "acmeclient",\n    organizationId: "1234567890@AdobeOrg",\n    decisioningMethod: "on-device"\n};\n\nconst targetClient = TargetClient.create(CONFIG);\n\ntargetClient.getOffers({\n    request: {\n        context: {\n            geo: {\n                city: "SAN FRANCISCO",\n                countryCode: "US",\n                stateCode: "CA",\n                latitude: 37.75,\n                longitude: -122.4\n            }\n        },\n        execute: {\n            pageLoad: {}\n        }\n    }\n})\n')),(0,d.mdx)("h4",{id:"java"},"Java"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"public class TargetRequestUtils {\n\n    public static Context getContext(HttpServletRequest request) {\n        Context context = new Context()\n            .geo(ipToGeoLookup(request.getRemoteAddr()))\n            .channel(ChannelType.WEB)\n            .timeOffsetInMinutes(330.0)\n            .address(getAddress(request));\n        return context;\n    }\n\n    public static Geo ipToGeoLookup(String ip) {\n        GeoResult geoResult = geoLookupService.lookup(ip);\n        return new Geo()\n            .city(geoResult.getCity())\n            .stateCode(geoResult.getStateCode())\n            .countryCode(geoResult.getCountryCode());\n    }\n}\n")),(0,d.mdx)("p",null,"However, if you do not have the ability to perform IP-to-Geo lookups on your server, but you still want to perform on-device decisioning for ",(0,d.mdx)("inlineCode",{parentName:"p"},"getOffers")," requests that contain geo-based audiences, this is also supported. The downside of this approach is that it will use a remote IP-to-Geo lookup, which will add latency to each ",(0,d.mdx)("inlineCode",{parentName:"p"},"getOffers")," call. This latency should be lower than a remote ",(0,d.mdx)("inlineCode",{parentName:"p"},"getOffers")," call, since it hits a CDN that is located close to your server. You must ",(0,d.mdx)("strong",{parentName:"p"},"only")," provide the ",(0,d.mdx)("inlineCode",{parentName:"p"},"ipAddress")," field in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Geo")," object in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Context")," of your request, in order for the SDK to retrieve the geo-location of your user's IP address. If any other field in addition to the ",(0,d.mdx)("inlineCode",{parentName:"p"},"ipAddress")," is provided, the Target SDK will not fetch the geo-location metadata for resolution."),(0,d.mdx)(l,{slots:"heading, code",repeat:"2",languages:"js, java",mdxType:"CodeBlock"}),(0,d.mdx)("h4",{id:"nodejs-1"},"Node.js"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-js"},'const CONFIG = {\n    client: "acmeclient",\n    organizationId: "1234567890@AdobeOrg",\n    decisioningMethod: "on-device"\n};\n\nconst targetClient = TargetClient.create(CONFIG);\n\ntargetClient.getOffers({\n    request: {\n        context: {\n            geo: {\n                ipAddress: "127.0.0.1"\n            }\n        },\n        execute: {\n            pageLoad: {}\n        }\n    }\n})\n')),(0,d.mdx)("h4",{id:"java-1"},"Java"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"public class TargetRequestUtils {\n\n    public static Context getContext(HttpServletRequest request) {\n        Context context = new Context()\n            .geo(new Geo().ipAddress(request.getRemoteAddr()))\n            .channel(ChannelType.WEB)\n            .timeOffsetInMinutes(330.0)\n            .address(getAddress(request));\n        return context;\n    }\n\n}\n")),(0,d.mdx)("h2",{id:"server-side-decisioning"},"Server-side decisioning"),(0,d.mdx)("p",null,"The following table indicates which audience rules are supported or not supported for server-side decisioning."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Audience Rule"),(0,d.mdx)("th",{parentName:"tr",align:null},"Server-side Decisioning"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/geo.html"},"Geo")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/network.html"},"Network")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/mobile.html"},"Mobile")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/custom-parameters.html"},"Custom Parameters")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/operating-system.html"},"Operating System")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/site-pages.html"},"Site Pages")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/browser.html"},"Browser")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/visitor-profile.html"},"Visitor Profile")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/traffic-sources.html"},"Traffic Sources")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/audiences/create-audiences/categories-audiences/time-frame.html"},"Time Frame")),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/integrate/mmp.html"},"Experience Cloud Audiences")," (Audiences from Adobe Audience Manager, Adobe Analytics, and Adobe Experience Manager"),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes")))))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-implement-server-side-sdk-guides-core-principles-audience-targeting-md-2cdb169c81d3d13657be.js.map